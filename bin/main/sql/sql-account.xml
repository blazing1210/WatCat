<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.watcat.mapper.AccountMapper">

	<!-- id,pw체크 -->
	<select id="loginCheck" parameterType="String" resultType="int">
		<![CDATA[ 
			SELECT
				COUNT(user_id) AS NUM
			FROM
				user
			WHERE
				user_id=#{userId} AND user_pw=#{userPw}		
		]]>
	</select >
	<select id="banCheck" parameterType="String" resultType="int">
		<![CDATA[ 
			SELECT
				COUNT(user_id) AS NUM
			FROM
				user
			WHERE
				user_id=#{userId} AND deleted_yn='Y'		
		]]>
	</select>
	<!-- 회원가입-->
	<insert id="signUp" parameterType="com.watcat.dto.userDto">
		<![CDATA[ 
			INSERT INTO
				user(user_id,user_pw,admin_permission)
			VALUES
				(#{userId},#{userPw},'N')	
		]]>
	</insert>
	<!-- id체크-->
	<select id="idCheck" parameterType="String" resultType="int">
		<![CDATA[ 
			SELECT
				COUNT(user_id) AS NUM
			FROM
				user
			WHERE
				user_id=#{userId}
		]]>
	</select>
	
	<!--유저 리스트보기 -->
	<select id="requestUserList" resultType="com.watcat.dto.userDto">
		<![CDATA[ 
			SELECT
				idx,user_id,user_pw,admin_permission,deleted_yn
			FROM
				user	
		]]>
	</select>
	
	
	<!-- 유저정지-->
	<update id="banUser" parameterType="int">
		<![CDATA[ 
			UPDATE
				user
			SET
				deleted_yn = 'Y'
			WHERE
				idx=#{idx}	
		]]>
	</update>
	
	<!-- 유저정지해제-->
	<update id="pardonUser" parameterType="int">
		<![CDATA[ 
			UPDATE
				user
			SET
				deleted_yn = 'N'
			WHERE
				idx=#{idx}	
		]]>
	</update>
	
	<!-- 유저삭제-->
	<delete id="deleteUser" parameterType="int">
		<![CDATA[ 
			DELETE
			FROM
				user
			WHERE
				idx=#{idx}		
			
		]]>
	</delete>
</mapper>