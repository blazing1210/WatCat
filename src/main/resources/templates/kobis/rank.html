<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>box office</title>

<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
	rel="stylesheet">

<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
	
<script>
	$(document).ready(function() {
		$("#btn-search").on("click", function() {
			var search = $("#btn-search").val();

			$.ajax({
				url : "/watcat/kobis",
				type : "GET",
				data : search,
				success : function(data) {

					var tbody = $("#memberTable> tbody").append(result);
					tbody.empty();
					for (var i = 0; i < data.length; i++) {
						let rank = data[i]["rank"];
						let movieNm = data[i]["movieNm"];
						let openDt = data[i]["openDt"];
						let audiAcc = data[i]["audiAcc"];
					
					
						var result = "<tr>";
						result += "<td>" + {rank} + "</td>";
						result += "<td>" + {movieNm} + "</td>";
						result += "<td>" + {openDt} + "</td>";
						result += "<td>" + {audiAcc} + "</td>";
						result += "</tr>";

						tbody.append(result);
					}
				},
			     error:function(request,status,error){
			         log("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
			        }

			});
		});
	});
</script>
</head>
<body>


		<header th:include="Header :: header"></header>


	<main class="container mt-5 border-bottom">
		<div class="row my-3">
			<div class="col-sm px-3">
				<div class="row my-3 border-bottom"></div>
				<table class="table table-hover table-striped text-center"
					id="memberTable">
					<colgroup>
					</colgroup>
					<thead>
						<tr>
							<th>순위</th>
							<th>영화 제목</th>
							<th>개봉일</th>
							<th>관객수</th>
						</tr>
					</thead>
					<tbody>
						<tr>
						
<!-- 							<th th:value="{boxOfficeResult.rank}"></th>
							<th th:value="{boxOfficeResult.movieNm}"></th>
							<th th:value="{boxOfficeResult.openDt}"></th>
							<th th:value="{boxOfficeResult.audiAcc}"></th> -->
						</tr>
					</tbody>
				</table>
				<div class="float-end">
					<button type="button" id="btn-search" class="btn btn-primary ">검색</button>
				</div>
			</div>
		</div>

	</main>




</body>
</html>



















